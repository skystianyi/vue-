{"remainingRequest":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\vue2.0-zoom\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\vue2.0-zoom\\index.vue","mtime":1553819206987},{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\css-loader\\index.js","mtime":1553819138077},{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1553819206438},{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\postcss-loader\\src\\index.js","mtime":1553819160974},{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1553819102740},{"path":"D:\\1810课程\\h5\\课程PPT和相关知识及老师模板\\第三阶段\\web-app(vue项目)\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1553819206436}],"contextDependencies":[],"result":["\n#_magnifier_layer{position: absolute; z-index: 9999; background: #f9f9f9;}\n._magnifier{position: relative;display: inline-block;}\n._magnifier img{vertical-align: middle;}\n._magnifier_zoom{position: absolute; top:0;left:0; z-index: 10;pointer-events:none;}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/vue2.0-zoom","sourcesContent":["<style>\r\n  #_magnifier_layer{position: absolute; z-index: 9999; background: #f9f9f9;}\r\n  ._magnifier{position: relative;display: inline-block;}\r\n  ._magnifier img{vertical-align: middle;}\r\n  ._magnifier_zoom{position: absolute; top:0;left:0; z-index: 10;pointer-events:none;}\r\n</style>\r\n<template>\r\n  <div class=\"_magnifier\">\r\n    <img :src=\"src\" :width=\"width\" :height=\"height\" @mouseover=\"handOver\"  @mousemove=\"handMove\" @mouseout=\"handOut\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'app',\r\n    props: {\r\n      src: {\r\n        type: String,\r\n        required: true\r\n      },\r\n      bigsrc: {\r\n        type: String,\r\n        required: true\r\n      },\r\n      width:{\r\n        type: String,\r\n        default:'auto'\r\n      },\r\n      height:{\r\n        type: String,\r\n        default:'auto'\r\n      },\r\n      configs: {\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            width:750,\r\n            height:450,\r\n            maskWidth:50,\r\n            maskHeight:50,\r\n            maskColor:'#fff',\r\n            maskOpacity:0.5\r\n          }\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        imgObj:{},\r\n        bigImg:{},\r\n        mouseMask:{},\r\n        imgLayer:{},\r\n        imgRect:{},\r\n      }\r\n    },\r\n    methods: {\r\n      handMove(e) {\r\n        let objX=e.pageX - this.imgRect.left;\r\n        let objY=e.pageY - this.imgRect.top;\r\n        let backgroundX=objX*(Math.ceil(this.bigImg.width/this.imgObj.offsetWidth)/1.5);\r\n        let backgroundY=objY*(Math.ceil(this.bigImg.height/this.imgObj.offsetHeight)/1.5);\r\n        //判断是否超出界限\r\n        let _maskX=objX-this.mouseMask.offsetHeight/2;\r\n        let _maskY=objY-this.mouseMask.offsetWidth/2;\r\n\r\n        if(_maskY<=0){\r\n          _maskY=0;\r\n        }\r\n        if(_maskY+this.mouseMask.offsetHeight>=this.imgRect.height){\r\n          _maskY=this.imgRect.height-this.mouseMask.offsetHeight;\r\n        }\r\n        if(_maskX<=0){\r\n          _maskX=0;\r\n        }\r\n        if(_maskX+this.mouseMask.offsetWidth>=this.imgRect.width){\r\n          _maskX=this.imgRect.width-this.mouseMask.offsetWidth;\r\n        }\r\n        this.mouseMask.style.webkitTransform=`translate3d(${_maskX}px,${_maskY}px,0)`;\r\n        //判断背景图是否小于预览框\r\n        if(backgroundY+this.configs.height>=this.bigImg.height){\r\n          backgroundY=this.bigImg.height-this.configs.height;\r\n        }\r\n        if(backgroundX+this.configs.width>=this.bigImg.width){\r\n          backgroundX=this.bigImg.width-this.configs.width;\r\n        }\r\n        this.imgLayer.style.backgroundPositionX= `-${backgroundX}px `;\r\n        this.imgLayer.style.backgroundPositionY= `-${backgroundY}px `;\r\n      },\r\n      handOut(e) {\r\n        this.imgLayer.remove();\r\n        this.mouseMask.remove();\r\n      },\r\n      handOver(e) {\r\n        if (!document.getElementById('_magnifier_layer')) {\r\n          //获取大图尺寸\r\n          this.imgObj= this.$el.getElementsByTagName('img')[0];\r\n          this.imgRect =this.imgObj.getBoundingClientRect();\r\n          this.bigImg = new Image();\r\n          this.bigImg.src = this.bigsrc;\r\n          //创建鼠标选择区域\r\n          this.mouseMask = document.createElement(\"div\");\r\n          this.mouseMask.className='_magnifier_zoom';\r\n          this.mouseMask.style.background=this.configs.maskColor;\r\n          this.mouseMask.style.height=this.configs.maskWidth+'px';\r\n          this.mouseMask.style.width=this.configs.maskHeight+'px';\r\n          this.mouseMask.style.opacity=this.configs.maskOpacity;\r\n          this.imgObj.parentNode.appendChild(this.mouseMask);\r\n          //创建预览框\r\n          let imgLayer = document.createElement(\"div\");\r\n          this.imgLayer=imgLayer;\r\n          let _layerHeight= this.configs.height;\r\n          let _layerWidth= this.configs.width;\r\n          imgLayer.id = '_magnifier_layer';\r\n          imgLayer.style.width = _layerWidth + 'px';\r\n          imgLayer.style.height = _layerHeight + 'px';\r\n          imgLayer.style.left =this.imgRect.left+this.imgRect.width + 'px';\r\n          imgLayer.style.top = this.imgRect.top+ 'px';\r\n          imgLayer.style.backgroundImage = `url('${this.bigsrc}')`;\r\n          imgLayer.style.backgroundRepeat = 'no-repeat';\r\n          document.body.appendChild(imgLayer);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"]}]}