{"remainingRequest":"C:\\前端\\软件\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\前端\\软件\\web-app\\node_modules\\vue2.0-zoom\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\前端\\软件\\web-app\\node_modules\\vue2.0-zoom\\index.vue","mtime":1514441755000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n#_magnifier_layer{position: absolute; z-index: 9999; background: #f9f9f9;}\n._magnifier{position: relative;display: inline-block;}\n._magnifier img{vertical-align: middle;}\n._magnifier_zoom{position: absolute; top:0;left:0; z-index: 10;pointer-events:none;}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/vue2.0-zoom","sourcesContent":["<style>\n  #_magnifier_layer{position: absolute; z-index: 9999; background: #f9f9f9;}\n  ._magnifier{position: relative;display: inline-block;}\n  ._magnifier img{vertical-align: middle;}\n  ._magnifier_zoom{position: absolute; top:0;left:0; z-index: 10;pointer-events:none;}\n</style>\n<template>\n  <div class=\"_magnifier\">\n    <img :src=\"src\" :width=\"width\" :height=\"height\" @mouseover=\"handOver\"  @mousemove=\"handMove\" @mouseout=\"handOut\"/>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'app',\n    props: {\n      src: {\n        type: String,\n        required: true\n      },\n      bigsrc: {\n        type: String,\n        required: true\n      },\n      width:{\n        type: String,\n        default:'auto'\n      },\n      height:{\n        type: String,\n        default:'auto'\n      },\n      configs: {\n        type: Object,\n        default() {\n          return {\n            width:750,\n            height:450,\n            maskWidth:50,\n            maskHeight:50,\n            maskColor:'#fff',\n            maskOpacity:0.5\n          }\n        }\n      }\n    },\n    data() {\n      return {\n        imgObj:{},\n        bigImg:{},\n        mouseMask:{},\n        imgLayer:{},\n        imgRect:{},\n      }\n    },\n    methods: {\n      handMove(e) {\n        let objX=e.pageX - this.imgRect.left;\n        let objY=e.pageY - this.imgRect.top;\n        let backgroundX=objX*(Math.ceil(this.bigImg.width/this.imgObj.offsetWidth)/1.5);\n        let backgroundY=objY*(Math.ceil(this.bigImg.height/this.imgObj.offsetHeight)/1.5);\n        //判断是否超出界限\n        let _maskX=objX-this.mouseMask.offsetHeight/2;\n        let _maskY=objY-this.mouseMask.offsetWidth/2;\n\n        if(_maskY<=0){\n          _maskY=0;\n        }\n        if(_maskY+this.mouseMask.offsetHeight>=this.imgRect.height){\n          _maskY=this.imgRect.height-this.mouseMask.offsetHeight;\n        }\n        if(_maskX<=0){\n          _maskX=0;\n        }\n        if(_maskX+this.mouseMask.offsetWidth>=this.imgRect.width){\n          _maskX=this.imgRect.width-this.mouseMask.offsetWidth;\n        }\n        this.mouseMask.style.webkitTransform=`translate3d(${_maskX}px,${_maskY}px,0)`;\n        //判断背景图是否小于预览框\n        if(backgroundY+this.configs.height>=this.bigImg.height){\n          backgroundY=this.bigImg.height-this.configs.height;\n        }\n        if(backgroundX+this.configs.width>=this.bigImg.width){\n          backgroundX=this.bigImg.width-this.configs.width;\n        }\n        this.imgLayer.style.backgroundPositionX= `-${backgroundX}px `;\n        this.imgLayer.style.backgroundPositionY= `-${backgroundY}px `;\n      },\n      handOut(e) {\n        this.imgLayer.remove();\n        this.mouseMask.remove();\n      },\n      handOver(e) {\n        if (!document.getElementById('_magnifier_layer')) {\n          //获取大图尺寸\n          this.imgObj= this.$el.getElementsByTagName('img')[0];\n          this.imgRect =this.imgObj.getBoundingClientRect();\n          this.bigImg = new Image();\n          this.bigImg.src = this.bigsrc;\n          //创建鼠标选择区域\n          this.mouseMask = document.createElement(\"div\");\n          this.mouseMask.className='_magnifier_zoom';\n          this.mouseMask.style.background=this.configs.maskColor;\n          this.mouseMask.style.height=this.configs.maskWidth+'px';\n          this.mouseMask.style.width=this.configs.maskHeight+'px';\n          this.mouseMask.style.opacity=this.configs.maskOpacity;\n          this.imgObj.parentNode.appendChild(this.mouseMask);\n          //创建预览框\n          let imgLayer = document.createElement(\"div\");\n          this.imgLayer=imgLayer;\n          let _layerHeight= this.configs.height;\n          let _layerWidth= this.configs.width;\n          imgLayer.id = '_magnifier_layer';\n          imgLayer.style.width = _layerWidth + 'px';\n          imgLayer.style.height = _layerHeight + 'px';\n          imgLayer.style.left =this.imgRect.left+this.imgRect.width + 'px';\n          imgLayer.style.top = this.imgRect.top+ 'px';\n          imgLayer.style.backgroundImage = `url('${this.bigsrc}')`;\n          imgLayer.style.backgroundRepeat = 'no-repeat';\n          document.body.appendChild(imgLayer);\n        }\n      }\n    }\n  }\n</script>\n"]}]}