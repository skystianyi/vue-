{"remainingRequest":"C:\\前端\\软件\\web-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\前端\\软件\\web-app\\src\\views\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\前端\\软件\\web-app\\src\\views\\Cart.vue","mtime":1553775125856},{"path":"C:\\前端\\软件\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\前端\\软件\\web-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n import \"../AmazeUI-2.4.2/assets/css/amazeui.css\";\n import \"../basic/css/demo.css\";\n import \"../css/cartstyle.css\";\n import \"../css/optstyle.css\";\n\n//import {products} from '../data'\nimport axios, { get } from 'axios';\n\nexport default {\n  data(){\n    return {\n\t\t\t//count:100,\n\t\t\tshopcount:0,\n\t\t\tpricecount:0,\n\t\t\tselectAll: false,\n      products:[],\n      page:1,\n      pagecount:1,\n    }\n\n  },\n  created(){\n        this.loadData()\n\t},\n\tcomputed:{\n\t\tinit(){\n\t\t\t\tif(sessionStorage.getItem('token')){   //如果返回的是true,则证明是有token值,则显示用户名\n        return `你好,${sessionStorage.getItem('userName')}`\n\t\t\t}else{\n\t\t\t\treturn '你好,请登录'\n\t\t\t}\n\t\t\t},\n\t\ttotal(){\n\t\t\tlet sumP= 0\n\t\t\tthis.products.forEach((item, index) => {\n\t\t\t\tif(item.checked==true){\n\t\t\t\t  sumP+=item.price*item.quantity\n\t\t\t\t}\n\t\t\t})\n\t\t//\tthis.products.forEach(item=> sumP+=item.price*item.count )\n\t\t\treturn sumP\n\t\t}\n\t},\n  methods:{\n    prePage(){\n      this.$router.go(-1)\n\t\t},\n\t\tselOne(id) {\n\t\t\t    console.log(id)\n          const index = this.products.findIndex(item => item.id == id)\n\t\t\t\t\tthis.products[index].checked = !this.products[index].checked;\n\t\t\t\t\tconsole.log(this.products[index].checked)\n\t\t\t\t\t if(this.products[index].checked ==true){\n\t\t\t\t\t\t\tthis.shopcount+=this.products[id].quantity\n\t\t\t\t\t\t\tthis.pricecount+=this.products[id].price*this.products[id].quantity\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.shopcount-=this.products[id].quantity\n\t\t\t\t\t\t\tthis.pricecount-=this.products[id].price*this.products[id].quantity\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(\"aa\")\n\t\t\t\t\tconsole.log(this.products.filter(item=>item.checked).length)\n\t\t\t\t\tif(this.products.filter(item=>item.checked).length==this.products.length){\n\t\t\t\t\t\tthis.selectAll=!this.selectAll;\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.selectAll=false;\n\t\t\t\t\t} \n\t\t\t\t},\n\t\t\t\tselAllHandle() {\n          this.selectAll = !this.selectAll;\n          this.products.forEach((item, index) => {\n\t\t\t\t\tthis.products[index].checked = this.selectAll;\n\t\t\t\t\tthis.pricecount+=this.products[index].price*this.products[index].quantity ;\n\t\t\t\t\tthis.shopcount+=this.products[index].quantity;\n\t\t\t\t\t})\n\t\t\t\t\tif(this.selectAll==false){\n\t\t\t\t\t\tthis.pricecount=0\n            this.shopcount=0\n\t\t\t\t\t}\n        },\n    add(id){\n         alert(id)\n\t\t},\n\t\taddHandle(id){\n\t\t\tconsole.log(id)\n\t\t\tthis.products[id].quantity+=1\n\t\t\t\n\t\t\t\tif(this.products[id].checked==true){\n\t\t\t\t\tthis.shopcount+=1;\n\t\t\t\t}\n\t\t\t\n\t\t\n\t\t},\n\t\treduceHandle(id){\n\t\t\t// this.count+=1\n\t\t\t//this.$refs.input1.value -=-1\n\t\t\tconsole.log(id)\n\t\t\tthis.products[id].quantity -=1\n\t\t\tif(this.products[id].checked==true){\n\t\t\t\tthis.shopcount-=1;\n\t\t\t}\n\t\t},\n    loadmore(){\n      this.page +=1\n      this.loadData()\n\t\t},\n\t\t\tLogin(){\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname:'Login'\n\t\t\t\t})\n\t\t\t},\n\t\t\tReg(){\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname:'Reg'\n\t\t\t\t})\n\t\t\t},\n\t\t\tdeleteHandle(id,index){\n\t\t\t\tconsole.log(index)\n\t\t\t\tconsole.log(id)\n\t\t\t\tconsole.log(\"aa\")\n\t\t\t\tconsole.log(this.products)\n\t\t\t\tthis.products.splice(0,1)\n\t\t\t\t axios.delete(`http://api.cat-shop.penkuoer.com/api/v1/shop_carts/${id}`,{\n              headers:{\n\t\t\t\t'Authorization':`bearer ${sessionStorage.getItem('token')}`\n\t\t\t  }\n\t\t\t\t}) \n\t\t\t\t.then(res=>{\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t})\n\t\t     .catch(err=>{\n\t\t\t    console.log(err)\n\t\t     })\n\t\t\t},\n\t\t\t\n    loadData(){\n      get(`http://localhost:3000/api/v1/products?page=${this.page}`)\n        .then(res => {\n          console.log(res)\n          this.products = this.products.concat(res.data.products)\n          this.pageCount = res.data.pages\n        })\n        .catch( err => {\n          //console.log(err)\n        })\n    }\n\t},\n\tcreated(){\n\t\tget('http://api.cat-shop.penkuoer.com/api/v1/shop_carts',{\n\t\t\theaders:{\n\t\t\t\t'Authorization':`bearer ${sessionStorage.getItem('token')}`\n\t\t\t}\n\t\t})\n\t\t.then(res=>{\n\t\t\tconsole.log(res.data)\n\t\t\t   \n             for(var i=0;i<res.data.length;i++){\n\t\t\t\t\t\t\t res.data[i].product.checked=false\n\t\t\t\t\t\t\t res.data[i].product.id111 = res.data[i]._id\n\t\t\t\t\t\t\t res.data[i].product.id= i\n\t\t\t\t\t\t\t this.products.push(res.data[i].product)\n\n\t\t\t\t\t\t }\n\t\t\t\t\t\t //console.log(this.products)\n\t\t\t//this.products\n\t\t})\n\t\t.catch(err=>{\n\t\t\tconsole.log(err)\n\t\t})\n\t}\n}\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"list\">\r\n  <div class=\"am-container header\">\r\n  <ul class=\"message-l\">\r\n\t\t\t\t<div class=\"topMessage\">\r\n\t\t\t\t\t<div class=\"menu-hd\">\r\n\t\t\t\t\t\t<a href=\"#\" target=\"_top\" class=\"h\" @click=\"Login\">{{init}}</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ul>\r\n\t\t\t<ul class=\"message-r\">\r\n\t\t\t\t<div class=\"topMessage home\">\r\n\t\t\t\t\t<div class=\"menu-hd\"><a href=\"#\" target=\"_top\" class=\"h\">商城首页</a></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"topMessage my-shangcheng\">\r\n\t\t\t\t\t<div class=\"menu-hd MyShangcheng\"><a href=\"#\" target=\"_top\"><i class=\"am-icon-user am-icon-fw\"></i>个人中心</a></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"topMessage mini-cart\">\r\n\t\t\t\t\t<div class=\"menu-hd\"><a id=\"mc-menu-hd\" href=\"#\" target=\"_top\"><i class=\"am-icon-shopping-cart  am-icon-fw\"></i><span>购物车</span><strong id=\"J_MiniCartNum\" class=\"h\">0</strong></a></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"topMessage favorite\">\r\n\t\t\t\t\t<div class=\"menu-hd\"><a href=\"#\" target=\"_top\"><i class=\"am-icon-heart am-icon-fw\"></i><span>收藏夹</span></a></div>\r\n          </div>\r\n\t\t\t</ul>\r\n      </div>\r\n      <div class=\"nav white\">\r\n\t\t\t\t<div class=\"logo\"><img src=\"../images/logo.png\" /></div>\r\n\t\t\t\t<div class=\"logoBig\">\r\n\t\t\t\t\t<li><img src=\"../images/logobig.png\" /></li>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"search-bar pr\">\r\n\t\t\t\t\t<a name=\"index_none_header_sysc\" href=\"#\"></a>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<input id=\"searchInput\" name=\"index_none_header_sysc\" type=\"text\" placeholder=\"搜索\" autocomplete=\"off\">\r\n\t\t\t\t\t\t<input id=\"ai-topsearch\" class=\"submit am-btn\" value=\"搜索\" index=\"1\" type=\"submit\">\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"clear\"></div>\r\n      <div class=\"concent\">\r\n\t\t\t\t<div id=\"cartTable\">\r\n\t\t\t\t\t<div class=\"cart-table-th\">\r\n\t\t\t\t\t\t<div class=\"wp\">\r\n\t\t\t\t\t\t\t<div class=\"th th-chk\">\r\n\t\t\t\t\t\t\t\t<div id=\"J_SelectAll1\" class=\"select-all J_SelectAll\">\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"th th-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"td-inner\">商品信息</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"th th-price\">\r\n\t\t\t\t\t\t\t\t<div class=\"td-inner\">单价</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"th th-amount\">\r\n\t\t\t\t\t\t\t\t<div class=\"td-inner\">数量</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"th th-sum\">\r\n\t\t\t\t\t\t\t\t<div class=\"td-inner\">金额</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"th th-op\">\r\n\t\t\t\t\t\t\t\t<div class=\"td-inner\">操作</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"clear\"></div>\r\n\r\n\t\t\t\t\t<tr class=\"item-list\">\r\n\t\t\t\t\t\t<div class=\"bundle  bundle-last \">\r\n\t\t\t\t\t\t\t<div class=\"bundle-hd\">\r\n\t\t\t\t\t\t\t\t<div class=\"bd-promos\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"bd-has-promo\">已享优惠:<span class=\"bd-has-promo-content\">省￥19.50</span>&nbsp;&nbsp;</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"act-promo\">\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"#\" target=\"_blank\">第二支半价，第三支免费<span class=\"gt\">&gt;&gt;</span></a>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<span class=\"list-change theme-login\">编辑</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\r\n\t\t\t\t\t\t\t<div class=\"bundle-main\">\r\n\t\t\t\t\t\t\t <ul class=\"item-content clearfix\" v-for=\"(product,id) in products\" :key=\"id\">\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-chk\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"cart-checkbox \">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class=\"check\" id=\"J_CheckBox_170037950254\" name=\"items[]\" value=\"170037950254\" type=\"checkbox\" @click=\"selOne(product.id)\" :checked=\"product.checked\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"J_CheckBox_170037950254\"></label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-item\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"item-pic\">\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" target=\"_blank\" data-title=\"美康粉黛醉美东方唇膏口红正品 持久保湿滋润防水不掉色护唇彩妆\" class=\"J_MakePoint\" data-point=\"tbcart.8.12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img :src=\"'https://api.cat-shop.penkuoer.com'+product.coverImg\" class=\"itempic J_ItemImg\"></a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"item-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"item-basic-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" target=\"_blank\" title=\"美康粉黛醉美唇膏 持久保湿滋润防水不掉色\" class=\"item-title J_MakePoint\" data-point=\"tbcart.8.11\">{{product.name}}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-info\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"item-props item-props-can\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sku-line\">颜色：12#川南玛瑙</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sku-line\">包装：裸装</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span tabindex=\"0\" class=\"btn-edit-sku theme-login\">修改</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"theme-login am-icon-sort-desc\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-price\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"item-price price-promo-promo\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"price-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"price-line\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<em class=\"price-original\">78.00</em>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"price-line\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<em class=\"J_Price price-now\" tabindex=\"0\">{{product.price}}</em>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-amount\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"amount-wrapper \">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"item-amount \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"sl\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"min am-btn\" name=\"\" type=\"button\" value=\"-\"  @click=\"reduceHandle(product.id)\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"text_box\" name=\"\" type=\"text\" :value=\"product.quantity\" ref=\"input1\" style=\"width:30px;\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"add am-btn\" name=\"\" type=\"button\" value=\"+\" @click=\"addHandle(product.id)\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-sum\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"td-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<em tabindex=\"0\" class=\"J_ItemSum number\">{{product.price*product.quantity}}</em>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"td td-op\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"td-inner\">\r\n\t\t\t\t\t\t\t\t\t\t\t<a title=\"移入收藏夹\" class=\"btn-fav\" href=\"#\">\r\n                  移入收藏夹</a>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:;\" data-point-url=\"#\" class=\"delete\" @click=\"deleteHandle(product.id111,product.id)\">\r\n                  删除</a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<div class=\"clear\"></div>\r\n\r\n\t\t\t\t\t<tr class=\"item-list\">\r\n\t\t\t\t\t\t<div class=\"bundle  bundle-last \">\r\n\t\t\t\t\t\t\t<div class=\"bundle-hd\">\r\n\t\t\t\t\t\t\t\t<div class=\"bd-promos\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"bd-has-promo\">已享优惠:<span class=\"bd-has-promo-content\">省￥19.50</span>&nbsp;&nbsp;</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"act-promo\">\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"#\" target=\"_blank\">第二支半价，第三支免费<span class=\"gt\">&gt;&gt;</span></a>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<span class=\"list-change theme-login\">编辑</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\r\n\t\t\t\t\t\t\t<div class=\"bundle-main\">\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"clear\"></div>\r\n\r\n\t\t\t\t<div class=\"float-bar-wrapper\">\r\n\t\t\t\t\t<div id=\"J_SelectAll2\" class=\"select-all J_SelectAll\">\r\n\t\t\t\t\t\t<div class=\"cart-checkbox\">\r\n\t\t\t\t\t\t\t<input v-model=\"selectAll\"  class=\"check-all check\" id=\"J_SelectAllCbx2\" name=\"select-all\" value=\"true\" type=\"checkbox\" @click=\"selAllHandle\">\r\n\t\t\t\t\t\t\t<label for=\"J_SelectAllCbx2\"></label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span >全选</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"operations\">\r\n\t\t\t\t\t\t<a href=\"#\" hidefocus=\"true\" class=\"deleteAll\" >删除</a>\r\n\t\t\t\t\t\t<a href=\"#\" hidefocus=\"true\" class=\"J_BatchFav\">移入收藏夹</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"float-bar-right\">\r\n\t\t\t\t\t\t<div class=\"amount-sum\">\r\n\t\t\t\t\t\t\t<span class=\"txt\">已选商品</span>\r\n\t\t\t\t\t\t\t<em id=\"J_SelectedItemsCount\">{{shopcount}}</em><span class=\"txt\">件</span>\r\n\t\t\t\t\t\t\t<div class=\"arrow-box\">\r\n\t\t\t\t\t\t\t\t<span class=\"selected-items-arrow\"></span>\r\n\t\t\t\t\t\t\t\t<span class=\"arrow\"></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"price-sum\">\r\n\t\t\t\t\t\t\t<span class=\"txt\">合计:</span>\r\n\t\t\t\t\t\t\t<strong class=\"price\">¥<em id=\"J_Total\">{{total}}</em></strong>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"btn-area\">\r\n\t\t\t\t\t\t\t<a href=\"pay.html\" id=\"J_Go\" class=\"submit-btn submit-btn-disabled\" aria-label=\"请注意如果没有选择宝贝，将无法结算\">\r\n\t\t\t\t\t\t\t\t<span>结&nbsp;算</span></a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\" src=\"../js/jquery.js\"></script>\r\n<script>\r\n import \"../AmazeUI-2.4.2/assets/css/amazeui.css\";\r\n import \"../basic/css/demo.css\";\r\n import \"../css/cartstyle.css\";\r\n import \"../css/optstyle.css\";\r\n\r\n//import {products} from '../data'\r\nimport axios, { get } from 'axios';\r\n\r\nexport default {\r\n  data(){\r\n    return {\r\n\t\t\t//count:100,\r\n\t\t\tshopcount:0,\r\n\t\t\tpricecount:0,\r\n\t\t\tselectAll: false,\r\n      products:[],\r\n      page:1,\r\n      pagecount:1,\r\n    }\r\n\r\n  },\r\n  created(){\r\n        this.loadData()\r\n\t},\r\n\tcomputed:{\r\n\t\tinit(){\r\n\t\t\t\tif(sessionStorage.getItem('token')){   //如果返回的是true,则证明是有token值,则显示用户名\r\n        return `你好,${sessionStorage.getItem('userName')}`\r\n\t\t\t}else{\r\n\t\t\t\treturn '你好,请登录'\r\n\t\t\t}\r\n\t\t\t},\r\n\t\ttotal(){\r\n\t\t\tlet sumP= 0\r\n\t\t\tthis.products.forEach((item, index) => {\r\n\t\t\t\tif(item.checked==true){\r\n\t\t\t\t  sumP+=item.price*item.quantity\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t//\tthis.products.forEach(item=> sumP+=item.price*item.count )\r\n\t\t\treturn sumP\r\n\t\t}\r\n\t},\r\n  methods:{\r\n    prePage(){\r\n      this.$router.go(-1)\r\n\t\t},\r\n\t\tselOne(id) {\r\n\t\t\t    console.log(id)\r\n          const index = this.products.findIndex(item => item.id == id)\r\n\t\t\t\t\tthis.products[index].checked = !this.products[index].checked;\r\n\t\t\t\t\tconsole.log(this.products[index].checked)\r\n\t\t\t\t\t if(this.products[index].checked ==true){\r\n\t\t\t\t\t\t\tthis.shopcount+=this.products[id].quantity\r\n\t\t\t\t\t\t\tthis.pricecount+=this.products[id].price*this.products[id].quantity\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.shopcount-=this.products[id].quantity\r\n\t\t\t\t\t\t\tthis.pricecount-=this.products[id].price*this.products[id].quantity\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(\"aa\")\r\n\t\t\t\t\tconsole.log(this.products.filter(item=>item.checked).length)\r\n\t\t\t\t\tif(this.products.filter(item=>item.checked).length==this.products.length){\r\n\t\t\t\t\t\tthis.selectAll=!this.selectAll;\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tthis.selectAll=false;\r\n\t\t\t\t\t} \r\n\t\t\t\t},\r\n\t\t\t\tselAllHandle() {\r\n          this.selectAll = !this.selectAll;\r\n          this.products.forEach((item, index) => {\r\n\t\t\t\t\tthis.products[index].checked = this.selectAll;\r\n\t\t\t\t\tthis.pricecount+=this.products[index].price*this.products[index].quantity ;\r\n\t\t\t\t\tthis.shopcount+=this.products[index].quantity;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(this.selectAll==false){\r\n\t\t\t\t\t\tthis.pricecount=0\r\n            this.shopcount=0\r\n\t\t\t\t\t}\r\n        },\r\n    add(id){\r\n         alert(id)\r\n\t\t},\r\n\t\taddHandle(id){\r\n\t\t\tconsole.log(id)\r\n\t\t\tthis.products[id].quantity+=1\r\n\t\t\t\r\n\t\t\t\tif(this.products[id].checked==true){\r\n\t\t\t\t\tthis.shopcount+=1;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t},\r\n\t\treduceHandle(id){\r\n\t\t\t// this.count+=1\r\n\t\t\t//this.$refs.input1.value -=-1\r\n\t\t\tconsole.log(id)\r\n\t\t\tthis.products[id].quantity -=1\r\n\t\t\tif(this.products[id].checked==true){\r\n\t\t\t\tthis.shopcount-=1;\r\n\t\t\t}\r\n\t\t},\r\n    loadmore(){\r\n      this.page +=1\r\n      this.loadData()\r\n\t\t},\r\n\t\t\tLogin(){\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname:'Login'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tReg(){\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname:'Reg'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteHandle(id,index){\r\n\t\t\t\tconsole.log(index)\r\n\t\t\t\tconsole.log(id)\r\n\t\t\t\tconsole.log(\"aa\")\r\n\t\t\t\tconsole.log(this.products)\r\n\t\t\t\tthis.products.splice(0,1)\r\n\t\t\t\t axios.delete(`http://api.cat-shop.penkuoer.com/api/v1/shop_carts/${id}`,{\r\n              headers:{\r\n\t\t\t\t'Authorization':`bearer ${sessionStorage.getItem('token')}`\r\n\t\t\t  }\r\n\t\t\t\t}) \r\n\t\t\t\t.then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t})\r\n\t\t     .catch(err=>{\r\n\t\t\t    console.log(err)\r\n\t\t     })\r\n\t\t\t},\r\n\t\t\t\r\n    loadData(){\r\n      get(`http://localhost:3000/api/v1/products?page=${this.page}`)\r\n        .then(res => {\r\n          console.log(res)\r\n          this.products = this.products.concat(res.data.products)\r\n          this.pageCount = res.data.pages\r\n        })\r\n        .catch( err => {\r\n          //console.log(err)\r\n        })\r\n    }\r\n\t},\r\n\tcreated(){\r\n\t\tget('http://api.cat-shop.penkuoer.com/api/v1/shop_carts',{\r\n\t\t\theaders:{\r\n\t\t\t\t'Authorization':`bearer ${sessionStorage.getItem('token')}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(res=>{\r\n\t\t\tconsole.log(res.data)\r\n\t\t\t   \r\n             for(var i=0;i<res.data.length;i++){\r\n\t\t\t\t\t\t\t res.data[i].product.checked=false\r\n\t\t\t\t\t\t\t res.data[i].product.id111 = res.data[i]._id\r\n\t\t\t\t\t\t\t res.data[i].product.id= i\r\n\t\t\t\t\t\t\t this.products.push(res.data[i].product)\r\n\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t //console.log(this.products)\r\n\t\t\t//this.products\r\n\t\t})\r\n\t\t.catch(err=>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n  .list{\r\n   padding-bottom:60px \r\n   }\r\n   .icon{\r\n     color:red;\r\n     font-size: 1.2rem\r\n\t } \r\n\t .item-pic img{width:50px;height:50px}\r\n</style>\r\n\r\n"]}]}